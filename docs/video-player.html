<!DOCTYPE html><html><head><title>Video Player</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width"><meta property="fb:app_id" content="1677033832619985"><meta property="fb:admins" content="121800083"><meta property="og:site_name" content="React Native"><meta property="og:title" content="Video Player"><meta property="og:url" content="https://facebook.github.io/react-vr/index.html"><meta property="og:image" content="https://facebook.github.io/react-vr/img/opengraph.png"><meta property="og:description" content="A framework for building native apps using React"><meta name="twitter:site" content="@reactnative"><meta name="twitter:card" content="summary_large_image"><meta property="og:type" content="website"><base href="../"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="shortcut icon" href="img/favicon.png?2"><link rel="stylesheet" href="css/react-vr.css"><link rel="alternate" type="application/rss+xml" title="React Native Blog" href="https://facebook.github.io/react-vr/blog/feed.xml"><link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css"><script type="text/javascript" src="https://use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body><script>window.fbAsyncInit = function() {FB.init({appId:'1677033832619985',xfbml:true,version:'v2.7'});};(function(d, s, id){var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) {return;}js = d.createElement(s); js.id = id;js.src = 'https://connect.facebook.net/en_US/sdk.js';fjs.parentNode.insertBefore(js, fjs);}(document, 'script','facebook-jssdk'));</script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, "script", "twitter-wjs"));</script><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="./index.html"><img src="img/header_logo.png">React VR</a><div class="nav-site-wrapper"><ul class="nav-site nav-site-internal"><li><a href="docs/getting-started.html" class="active" data-target=".nav-docs">Docs</a></li></ul><ul class="nav-site nav-site-external"><li><a href="https://github.com/facebook/react-vr" class="">GitHub</a></li><li><a href="http://facebook.github.io/react" class="">React</a></li><li><a href="http://facebook.github.io/react-native" class="">React Native</a></li></ul></div></div></div><section class="content wrap documentationContent"><div class="nav-docs"><div class="nav-docs-viewport"><div class="nav-docs-section"><h3>The Basics</h3><ul><li><a style="margin-left:10px;" class="" href="docs/getting-started.html">Getting Started</a></li><li><a style="margin-left:10px;" class="" href="docs/tutorial.html">Hello World</a></li><li><a style="margin-left:10px;" class="" href="docs/project-configuration.html">Project Configuration</a></li><li><a style="margin-left:10px;" class="" href="docs/publishing.html">Publishing Your Project</a></li><li><a style="margin-left:10px;" class="" href="docs/react-vroverview.html">React VR Overview</a></li><li><a style="margin-left:10px;" class="" href="docs/components-props-and-state.html">Components, Props and State</a></li><li><a style="margin-left:10px;" class="" href="docs/layout-and-style.html">Layout and Style</a></li><li><a style="margin-left:10px;" class="" href="docs/3dcoordinates-and-transforms.html">3D Coordinates and Transforms</a></li><li><a style="margin-left:10px;" class="" href="docs/input.html">Cursors and Input</a></li><li><a style="margin-left:10px;" class="" href="docs/fonts.html">Fonts and Text</a></li><li><a style="margin-left:10px;" class="" href="docs/vrbrowsers.html">VR Browsers</a></li><li><a style="margin-left:10px;" class="" href="docs/dev-tools.html">Dev Tools</a></li><li><a style="margin-left:10px;" class="" href="docs/release-change-log.html">Release Changelog</a></li></ul></div><div class="nav-docs-section"><h3>Guides</h3><ul><li><a style="margin-left:10px;" class="" href="docs/animations.html">Animations</a></li><li><a style="margin-left:10px;" class="" href="docs/colors.html">Colors</a></li><li><a style="margin-left:10px;" class="" href="docs/debugging.html">Debugging</a></li><li><a style="margin-left:10px;" class="" href="docs/images.html">Images</a></li><li><a style="margin-left:10px;" class="" href="docs/timers.html">Timers</a></li><li><a style="margin-left:10px;" class="" href="docs/native-modules.html">Native Modules</a></li><li><a style="margin-left:10px;" class="" href="docs/platform-specific-information.html">Platform Specific Code</a></li><li><a style="margin-left:10px;" class="active" href="docs/video-player.html">Video Player</a></li></ul></div><div class="nav-docs-section"><h3>core components</h3><ul><li><a style="margin-left:10px;" class="" href="docs/view.html">View</a></li><li><a style="margin-left:10px;" class="" href="docs/image.html">Image</a></li><li><a style="margin-left:10px;" class="" href="docs/text.html">Text</a></li></ul></div><div class="nav-docs-section"><h3>React VR Components</h3><ul><li><a style="margin-left:10px;" class="" href="docs/ambientlight.html">AmbientLight</a></li><li><a style="margin-left:10px;" class="" href="docs/box.html">Box</a></li><li><a style="margin-left:10px;" class="" href="docs/cylinder.html">Cylinder</a></li><li><a style="margin-left:10px;" class="" href="docs/cylindricalpanel.html">CylindricalPanel</a></li><li><a style="margin-left:10px;" class="" href="docs/directionallight.html">DirectionalLight</a></li><li><a style="margin-left:10px;" class="" href="docs/model.html">Model</a></li><li><a style="margin-left:10px;" class="" href="docs/pano.html">Pano</a></li><li><a style="margin-left:10px;" class="" href="docs/plane.html">Plane</a></li><li><a style="margin-left:10px;" class="" href="docs/pointlight.html">PointLight</a></li><li><a style="margin-left:10px;" class="" href="docs/scene.html">Scene</a></li><li><a style="margin-left:10px;" class="" href="docs/sound.html">Sound</a></li><li><a style="margin-left:10px;" class="" href="docs/sphere.html">Sphere</a></li><li><a style="margin-left:10px;" class="" href="docs/spotlight.html">SpotLight</a></li><li><a style="margin-left:10px;" class="" href="docs/video.html">Video</a></li><li><a style="margin-left:10px;" class="" href="docs/videocontrol.html">VideoControl</a></li><li><a style="margin-left:10px;" class="" href="docs/videopano.html">VideoPano</a></li><li><a style="margin-left:10px;" class="" href="docs/vrbutton.html">VrButton</a></li></ul></div><div class="nav-docs-section"><h3>APIs</h3><ul><li><a style="margin-left:10px;" class="" href="docs/animated.html">Animated</a></li><li><a style="margin-left:10px;" class="" href="docs/appregistry.html">AppRegistry</a></li><li><a style="margin-left:10px;" class="" href="docs/appstate.html">AppState</a></li><li><a style="margin-left:10px;" class="" href="docs/asyncstorage.html">AsyncStorage</a></li><li><a style="margin-left:10px;" class="" href="docs/easing.html">Easing</a></li><li><a style="margin-left:10px;" class="" href="docs/linking.html">Linking</a></li><li><a style="margin-left:10px;" class="" href="docs/stylesheet.html">StyleSheet</a></li><li><a style="margin-left:10px;" class="" href="docs/mediaplayerstate.html">MediaPlayerState</a></li><li><a style="margin-left:10px;" class="" href="docs/nativemethodsmixin.html">NativeMethodsMixin</a></li><li><a style="margin-left:10px;" class="" href="docs/vrheadmodel.html">VrHeadModel</a></li><li><a style="margin-left:10px;" class="" href="docs/vrsoundeffects.html">VrSoundEffects</a></li><li><a style="margin-left:10px;" class="" href="docs/layout-props.html">Layout Props</a></li></ul></div></div></div><div class="inner-content"><a id="content"></a><h1><a class="anchor" name="video-player"></a>Video Player <a class="hash-link" href="docs/video-player.html#video-player">#</a></h1><div><p>You can write your own video player to play videos that React VR doesn&#x27;t support.</p><p>React VR uses an HTML5 <code>&lt;video&gt;</code> element for video playback, however you may have a custom format and use your own video player.</p><p>React VR doesn&#x27;t expect to cover all these features, however we provide a way to hook your customized video player into the React VR video module.</p><h2><a class="anchor" name="basicvideoplayer"></a>BasicVideoPlayer <a class="hash-link" href="docs/video-player.html#basicvideoplayer">#</a></h2><p><code>BasicVideoPlayer</code> is the default video player which embedded HTML5 <code>&lt;video&gt;</code> element for video playback. Your customized video player needs to extend <code>BasicVideoPlayer</code>. Here&#x27;re some important properties and methods of <code>BasicVideoPlayer</code> that you may want to override.</p><ul><li><strong>supportedFormats</strong> - If your customized video player is used only for some specific video formats, and you still want the to use other video players for other video formats, you need to override supportedFormats and specify the video formats your customized video player supports.</li><li><strong>videoElement</strong> - React VR will take the videoElement and convert to texture to render in the scene.</li><li><strong>initializeVideo(src, metaData)</strong> - When the source of a <code>&lt;Video&gt;</code> or <code>&lt;VideoPano&gt;</code> is set, the video module will call this method to intialize the video. You can pass extra metaData to your video player in <code>source.metaData</code> to help you initialize the video(e.g. pass the proxy to play DRM contents).</li><li><strong>dispose()</strong> - This will be called when the video player is going to be disposed.</li></ul><h2><a class="anchor" name="addcustomizedvideoplayer"></a>addCustomizedVideoPlayer <a class="hash-link" href="docs/video-player.html#addcustomizedvideoplayer">#</a></h2><p>You can hook a customized video player with React VR by calling <code>addCustomizedVideoPlayer</code>. If you have more than one customized video players, you can call <code>addCustomizedVideoPlayer</code> for each of them. React VR will choose the appropriate player via the video formats they support.</p><h2><a class="anchor" name="dash-example"></a>Dash Example <a class="hash-link" href="docs/video-player.html#dash-example">#</a></h2><p>One example of using customized video player is to support adaptive bitrate streaming such as MPEG-DASH.</p><h3><a class="anchor" name="write-a-mpeg-dash-video-player"></a>Write a MPEG-DASH video player <a class="hash-link" href="docs/video-player.html#write-a-mpeg-dash-video-player">#</a></h3><p>The customized video player needs to extend <code>BasicVideoPlayer</code>.
Also define the supportedFormats for DashVideoPlayer. DashVideoPlayer&#x27;s supported video formats depend on the HTML5 <code>&lt;video&gt;</code> element&#x27;s supported formats</p><div class="prism language-javascript">import <span class="token punctuation">{</span>BasicVideoPlayer<span class="token punctuation">,</span> getSupportedFormats<span class="token punctuation">}</span> from <span class="token string">&#x27;react-vr-web&#x27;</span><span class="token punctuation">;</span>

const browserSupportedFormat <span class="token operator">=</span> <span class="token function">getSupportedFormats<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
const dashFormats <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#x27;mp4&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;webm&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
const dashSupportedFormats <span class="token operator">=</span> dashFormats<span class="token punctuation">.</span><span class="token function">filter<span class="token punctuation">(</span></span><span class="token punctuation">(</span>format<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> browserSupportedFormat<span class="token punctuation">.</span><span class="token function">indexOf<span class="token punctuation">(</span></span>format<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

export default class <span class="token class-name">DashVideoPlayer</span> extends <span class="token class-name">BasicVideoPlayer</span> <span class="token punctuation">{</span>
  static supportedFormats<span class="token punctuation">:</span> <span class="token operator">?</span>Array&lt;string<span class="token operator">&gt;</span> <span class="token operator">=</span> dashSupportedFormats<span class="token punctuation">;</span></div><p>Create the MPEG-DASH player:</p><div class="prism language-javascript">  <span class="token function">constructor<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">super<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>player <span class="token operator">=</span> dashjs<span class="token punctuation">.</span><span class="token function">MediaPlayer<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">setScheduleWhilePaused<span class="token punctuation">(</span></span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></div><p>Initialize the MPEG-DASH player:</p><div class="prism language-javascript">  <span class="token function">initializeVideo<span class="token punctuation">(</span></span>mpdUrl<span class="token punctuation">,</span> metaData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>videoElement<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> <span class="token string">&#x27;anonymous&#x27;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_bindMediaEvents<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">initialize<span class="token punctuation">(</span></span><span class="token keyword">this</span><span class="token punctuation">.</span>videoElement<span class="token punctuation">,</span> mpdUrl<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></div><p>Here <code>_bindMediaEvents()</code> is used to register to html media events.</p><p>Dispose the player:</p><div class="prism language-javascript">  <span class="token function">dispose<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">reset<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    super<span class="token punctuation">.</span><span class="token function">dispose<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></div><h3><a class="anchor" name="hook-customized-video-player"></a>Hook Customized Video Player <a class="hash-link" href="docs/video-player.html#hook-customized-video-player">#</a></h3><p>We use <code>addCustomizedVideoPlayer</code> to hook the <code>DashVideoPlayer</code> in the <code>init</code> function of <code>vr/client.js</code> (one of the files provided as part of the Starter Project).</p><div class="prism language-javascript">import <span class="token punctuation">{</span>addCustomizedVideoPlayer<span class="token punctuation">}</span> from <span class="token string">&#x27;react-vr-web&#x27;</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">function</span> <span class="token function">init<span class="token punctuation">(</span></span>bundle<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">addCustomizedVideoPlayer<span class="token punctuation">(</span></span>DashVideoPlayer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></div><p>See the <code>DashSample</code> for the full code of this example.</p></div><div class="docs-prevnext"><a class="docs-prev" href="docs/platform-specific-information.html#content">← Prev</a><a class="docs-next" href="docs/view.html#content">Next →</a></div><p class="edit-page-block">You can <a target="_blank" href="https://github.com/facebook/react-vr/issues">file an issue on GitHub</a> if you see a typo or error on this page!</p></div></section><footer class="nav-footer"><section class="sitemap"><a href="./index.html" class="nav-home"><img src="img/header_logo.png" alt="React Native" width="66" height="58"></a><div><h5>Docs</h5><a href="docs/getting-started.html">Getting Started</a><a href="docs/tutorial.html">Tutorial</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"></a><section class="copyright">Copyright © 2017 Facebook Inc.</section></footer></div><div id="fb-root"></div><script src="js/scripts.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-44373548-27', 'auto');ga('send', 'pageview');</script></body></html>