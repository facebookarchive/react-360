<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Input Handling · React 360</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Input Handling · React 360"/><meta property="og:type" content="website"/><meta property="og:url" content="https://facebook.github.io/react-360/index.html"/><meta property="og:description" content="Your users consume your experience through a variety of devices, each with its own input configuration. React 360 has been designed to support this hardware diversity in a way that lets you focus on your app&#x27;s logic, instead of special-casing different inputs. "/><meta property="og:image" content="https://facebook.github.io/react-360/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://facebook.github.io/react-360/img/docusaurus.png"/><link rel="shortcut icon" href="/react-360/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://facebook.github.io/blog/atom.xml" title="React 360 Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://facebook.github.io/blog/feed.xml" title="React 360 Blog RSS Feed"/><link rel="stylesheet" href="/react-360/css/main.css"/></head><body class="sideNavVisible doc separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-360/"><img class="logo" src="/react-360/img/logo.svg" alt="React 360"/><h2 class="headerTitle">React 360</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/react-360/docs/setup.html" target="_self">Docs</a></li><li class=""><a href="/react-360/docs/example-slideshow.html" target="_self">Examples</a></li><li class=""><a href="/react-360/blog" target="_self">Blog</a></li><li class=""><a href="https://github.com/facebook/react-360" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Concepts</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Getting Started</h3><ul><li class="navListItem"><a class="navItem" href="/react-360/docs/setup.html">Create Your First Project</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/explore-code.html">Exploring the Code</a></li></ul></div><div class="navGroup navGroupActive"><h3>Concepts</h3><ul><li class="navListItem"><a class="navItem" href="/react-360/docs/what-is.html">What is React 360?</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/runtime.html">Runtime</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/photos-and-videos.html">360 Photos and Videos</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/surfaces.html">Surfaces</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/objects.html">3D Objects</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/layout.html">Layout</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/audio.html">Playing Audio</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/react-360/docs/input.html">Input Handling</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/native-modules.html">Native Modules</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/from-react-vr.html">Legacy React VR Apps</a></li></ul></div><div class="navGroup navGroupActive"><h3>Publishing</h3><ul><li class="navListItem"><a class="navItem" href="/react-360/docs/publish.html">Build for Production</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/static-assets.html">Static Assets</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/integrate.html">Integrate with Another Site</a></li></ul></div><div class="navGroup navGroupActive"><h3>Components</h3><ul><li class="navListItem"><a class="navItem" href="/react-360/docs/view.html">View</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/text.html">Text</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/image.html">Image</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/entity.html">Entity</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/vr-button.html">VrButton</a></li></ul></div><div class="navGroup navGroupActive"><h3>APIs</h3><ul><li class="navListItem"><a class="navItem" href="/react-360/docs/animated.html">Animated</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/async-storage.html">AsyncStorage</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/controller-info.html">ControllerInfo</a></li><li class="navListItem"><a class="navItem" href="/react-360/docs/environment.html">Environment</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/facebook/react-360/tree/master/docs/input.md" target="_blank" rel="noreferrer noopener">Edit</a><h1>Input Handling</h1></header><article><div><span><p>Your users consume your experience through a variety of devices, each with its own input configuration. React 360 has been designed to support this hardware diversity in a way that lets you focus on your app's logic, instead of special-casing different inputs.</p>
<h2><a class="anchor" aria-hidden="true" id="button-input"></a><a href="#button-input" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Button Input</h2>
<p>The most common way for your user to interact with your app is through pressing a physical button: a keyboard key, a mouse click, a gamepad button, or something similar. React 360 is designed to collect input from a wide range of devices and send it to your React code in an easy-to-use format. When you create a new React 360 app, it is already configured to collect input from a mouse, a touchscreen, a keyboard, or a gamepad. To start handling events in React, add an onInput callback to one of your components. When the cursor is over your component and the user triggers an input event, it will be sent to that callback.</p>
<pre><code class="hljs">&lt;View onInput={e =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">event</span> = e.nativeEvent; <span class="hljs-comment">// Extract the value from the runtime</span>
  <span class="hljs-comment">// event contains the actual event payload, as well as information on</span>
  <span class="hljs-comment">// which cursor the user was using, and which React tag was targeted</span>
  <span class="hljs-keyword">const</span> inputEvent = <span class="hljs-keyword">event</span>.inputEvent; <span class="hljs-comment">// Extract the payload</span>
  <span class="hljs-comment">// inputEvent.button is the raw button index, used to determine what was pressed</span>
  <span class="hljs-comment">// inputEvent.buttonClass is a field added to some buttons for common actions,</span>
  <span class="hljs-comment">//   like 'confirm', 'back', 'up', 'down', etc.</span>
  <span class="hljs-comment">// inputEvent.action is 'up', 'down', or 'repeat'</span>
  <span class="hljs-comment">// inputEvent.source identifies the button device, such as keyboard, mouse, etc</span>
}}&gt;
  { <span class="hljs-comment">/* ... */</span> }
&lt;/View&gt;
</code></pre>
<p>Out of the box, React 360 supports collecting inputs from four common interfaces: mouse, touchscreen, keyboard, and gamepads. Between the four of these, the majority of user input systems should be covered. These input systems are themselves highly configurable, and can be extended or overridden to align with your app's behavior. For instance, the Gamepad interface is designed to handle both traditional gamepads and tracked VR inputs. It contains presets for common inputs, such as the Xbox controller, Oculus Touch devices, the Oculus Go controller, and Microsoft Mixed Reality controllers. It also allows you to define your own custom mappings, in case you want to override the presets or add support for a new device.</p>
<p>If you wanted to capture every time a confirm button was pressed down, it would be implemented as follows:</p>
<pre><code class="hljs">onInput={<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> inputEvent = e.nativeEvent.inputEvent;
  <span class="hljs-keyword">if</span> (inputEvent.action === <span class="hljs-string">'down'</span> &amp;&amp; inputEvent.buttonClass === <span class="hljs-string">'confirm'</span>) {
    <span class="hljs-comment">// do something</span>
  }
}}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="vrbutton-and-clicks"></a><a href="#vrbutton-and-clicks" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>VrButton and Clicks</h3>
<p>Input events allow you to respond to raw signals, but you often want to respond to a confirmation key being pressed and released, signifying a click event. We provide a component that contains the state-machine logic necessary to track these complex events: <code>VrButton</code>. In addition to the existing <code>onEnter</code>, <code>onExit</code>, and <code>onInput</code> handlers, VrButton also provides an <code>onClick</code> event handler. When the cursor is placed over the VrButton, and a confirm-type button is pressed and released on any input device, this callback is triggered. VrButtons are the easiest way to build click-driven effects into your app. Because they contain general-purpose logic, they don't have any styling of their own. You can make a VrButton look however you want, or combine it with some enter &amp; exit highlight effects to create a custom visual Button component for your application.</p>
<h2><a class="anchor" aria-hidden="true" id="cursors"></a><a href="#cursors" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cursors</h2>
<p>Enter, exit, and input events are sent to React based on where the cursor is pointing. The cursor is also highly configurable to support multiple input scenarios. Out of the box, React 360 supports mouse and touch input, as well as 3DoF and 6DoF VR controllers. These inputs work by casting a virtual laser beam into the screen – the cursor is drawn where the beam intersects with a scene element.</p>
<p>Components can listen to enter and exit events with <code>onEnter</code> and <code>onExit</code> callbacks. When the cursor begins to intersect with an element, its <code>onEnter</code> handler will be triggered; when the cursor later leaves the element, its <code>onExit</code> handler will be called.</p>
<p>Currently, cursors are tested in the order they are registered. The first cursor that successfully returns a ray will be used to determine the location of the cursor. Future iterations of React 360 will enable multiple cursors for users who are using two-handed inputs like Oculus Touch.</p>
<h3><a class="anchor" aria-hidden="true" id="custom-raycasters"></a><a href="#custom-raycasters" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom Raycasters</h3>
<p>If you want to implement your own cursor system, you will need to build a <strong>Raycaster</strong> – a piece of code that continuously tells your application where the virtual laser beam is located. Raycasters must implement a specific interface, described <a href="https://github.com/facebook/react-360/blob/master/React360/js/Controls/Types.js">here</a>.</p>
<p>At their simplest, Raycasters describe a 3D ray that intersects with your scene: a starting point and a direction in which the ray is projected. This information is collected each frame through the <code>fillOrigin</code> and <code>fillDirection</code> methods. These each take a 3-element array as their argument, and optionally fill it with the current origin location or direction (as a 3-dimensional vector). If a value has been inserted, they return true; otherwise, they return false. These methods fill pre-allocated arrays, rather than creating new ones, to avoid constant creation of new JS objects.</p>
<p>Depending on your input data, your raycaster may be positioned relative to the camera (such as with the mouse cursor), or in absolute world coordinates (as seen in the controller raycaster, which gets the absolute location from the Gamepad API). Raycasters implement a <code>hasAbsoluteCoordinates()</code> method that returns a boolean telling the Runtime whether the orientation and direction are absolute or relative to the camera. If it returns false, the ray data will be translated to the camera's frame of reference before it is consumed by React 360.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="audio.html">← Playing Audio</a><a class="docs-next button" href="native-modules.html">Native Modules →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#button-input">Button Input</a><ul class="toc-headings"><li><a href="#vrbutton-and-clicks">VrButton and Clicks</a></li></ul></li><li><a href="#cursors">Cursors</a><ul class="toc-headings"><li><a href="#custom-raycasters">Custom Raycasters</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/react-360/" class="nav-home"><img src="/react-360/img/logo.svg" alt="React 360" width="66" height="58"/></a><div><h5>Docs</h5><a href="/react-360/docs/en/setup.html">Getting Started</a><a href="/react-360/docs/en/example-slideshow.html">Examples</a></div><div><h5>More</h5><a href="/react-360/blog">Blog</a><a href="https://github.com/facebook/react-360">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/react-360/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/react-360/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Facebook Inc.</section></footer></div></body></html>